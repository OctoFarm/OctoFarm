<% const releasesURL = "https://github.com/NotExpectedYet/OctoFarm/releases" %>
<% const instructionsURL = "https://docs.octofarm.net/installation/setup-service.html" %>

<div class="row">
    <div class="col col-lg-12">
        Startup Checks
        1. Database connection
        2. Minimum Nodejs version
        3. Running with pm2
        4.
    </div>
</div>



<div class="alert alert-warning" role="alert">

</div>

<div class="alert alert-warning" role="alert">
    Your system is not running with PM2! Some commands below may not work... Please
    setup your system correctly as instructed here: <a
            href='<%= instructionsURL %>' target='_blank'>Click Here</a>
</div>

<div class="alert alert-success" role="alert">
    <i class="fas fa-heart text-danger"></i> Hey lovely developer! Thanks for helping make OctoFarm great!
</div>

<div class="alert alert-warning" role="alert">
    TThe "Restart" and "Update" have all been disabled due to
    Docker having it's own update mechanism
    Please check the <a
            href="<%= instructionsURL %>">Installation
        Instructions</a> for more information on how to update
    your docker container.
</div>

<div class="alert alert-warning" role="alert">
    The "Restart" and "Update" functions have all been disabled due to not been
    able to detect the use of the pm2 process manager.
    Please check the <a target="_blank" href="<%= instructionsURL %>">Installation
        Instructions</a> for more information on how to set this
    up.
</div>
 <div class="row">
     <div class="col-12 text-center">
         <div class="row">
             <div class="col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2">
                 <i class="fas fa-hourglass-half"></i> OctoFarm Uptime: <br>
                 <span class="text-light" id="processUpdate" style="font-size:0.8rem;">

                </span>
             </div>
             <div class="col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2">
                 <i class="fas fa-code-branch"></i> Current Version: <a
                         title="OctoFarm current version, will take you to github releases page"
                         class="text-light"
                         href="<%= releasesURL %>"
                         target="_blank"><br></a>
             </div>
             <div class="col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2">
                     <i class="fas fa-code-branch"></i> Latest Version: <a
                                 title="OctoFarm latest version, will take you to github releases page"
                                 class="text-light"
                                 href="<%= releasesURL %>"
                                 target="_blank"><br></a>
                     <i class="fas fa-code-branch"></i> Latest Version:
                         <a title="OctoFarm latest version, will take you to github releases page"
                                 class="text-light"
                                 href=""
                                 target="_blank"><br>
                             <br>
                         </a>
             </div>
             <div class="col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2">

                     <p class="text-light mb-0"><i class="fas fa-heartbeat text-danger"></i> Farm is
                         currently air gapped</p>
                     <small class="text-warning">Please note some features may not work as intended</small>
                     <p class="text-light"><i class="fas fa-heart text-success"></i> Farm is connected to the
                         internet</p>
             </div>
                 <div class="col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2">
                     <p class="text-light mt-2">Powered by <i class="fab fa-node fa-2x text-success"></i></p>
                 </div>
                 <div class="col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2">
                     <p class="text-light"><i class="fab fa-docker text-info"></i></p>
                 </div>
             <div class="col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2">

                     <p class="text-light"><i class="far fa-eye text-info"></i></i> Running under pm2</p>
                     <p class="text-light"><i class="far fa-eye text-info"></i> Running under nodemon</p>
             </div>
         </div>
     </div>
 </div>
        <hr>
<div class="row">
            <div class="col-12 text-center">
                <div class="row">
                    <div class="col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2">
                        <i class="fas fa-hourglass-half"></i> System Uptime: <br>
                        <span class="text-light" id="systemUptime" style="font-size:0.8rem;">
                        </span>
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2">
                        <i class="fas fa-server"></i> OS: <br><span class="text-light"
                                                                    id="systemArch"
                                                                    style="font-size:0.8rem;">
                            </span>
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2">
                        <i class="fas fa-bullseye"></i> System Architecture: <br><span
                                class="text-light" id="systemArch" style="font-size:0.8rem;">
                                </span>
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2">
                        <i class="fas fa-hdd"></i> Main Disk:
                        <b></b><br>
                        <b>Disk Partition: </b>
                     <br>
                        <span class="text-light" id="systemHardDrive" style="font-size:0.8rem;">
                               %
                            </span>
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2">
                        <i class="far fa-clock"></i> Timezone: <br>
                        <span class="text-light" id="timeZone" style="font-size:0.8rem;">

                        </span>
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2">
                        <i class="fas fa-terminal"></i> Run Command: <br>
                        <span class="text-light" id="runCommand" style="font-size:0.8rem;">

                        </span>
                    </div>
                </div>
            </div>
        </div>
        <hr>
<div class="row">
    <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 text-center">
        <i class="fas fa-microchip"></i> CPU: <br><span
                class="text-light" id="systemArch"
                style="font-size:0.8rem;"></span>

            <small class="text-light"> :</small>
            <code>Ghz</code>

        <div id="systemChartCPU"></div>
    </div>
    <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 text-center">
        <i class="fas fa-memory"></i> Memory: <br>
        <span
                class="text-light" id="systemArch"
                style="font-size:0.8rem;">

                                </span>
        <div id="systemChartMemory"></div>
    </div>
</div>
<script>
   let systemInformationInterval = null;

   function load() {
       $('#systemInformationModal').on('show.bs.modal', function () {
           console.log(systemInformationInterval)
           if(!systemInformationInterval){
               console.log("SETTING UP MODAL")
               systemInformationInterval = setInterval(()=>{
                  console.log("UPDATING MODAL")
               },1000)
           }
       })
       $('#systemInformationModal').on('hide.bs.modal', function () {
           console.log("CLEAR INTERVAL")
           clearInterval(systemInformationInterval)
           systemInformationInterval = null;
       })
   }
   load()
</script>