<% let base = '..' %>
<% let alert = base + '/octofarm-alert.ejs' %>
<% let singleStat = base + '/octofarm-single-stat.ejs' %>
<% let infoAlert = base + '/octofarm-title-info.ejs' %>

<% const instructionsURL = "https://docs.octofarm.net/installation/setup-service.html" %>
<% const updateURL = "https://docs.octofarm.net/getting-started/octofarm-updating.html" %>
<% const installationURL = "https://docs.octofarm.net/installation/" %>
<% const releasesURL = "https://github.com/OctoFarm/OctoFarm/releases/tag/" %>
<% const npmURL = "https://www.npmjs.com/package/@notexpectedyet/octofarm-client" %>

<div class="row">
    <div class="col-12">
        <%- include(alert, {
        alertType: "secondary",
        alertMessage: "Check version information and update your OctoFarm instance to the latest version"
        })
        %>
    </div>
    <div class="col-12 col-md-12 col-lg-6">
        <div class="d-grid gap-2">
            <button title="Performs a check for latest updates of OctoFarm"
                    id="check-updates" type="button"
                    class="btn btn-outline-info ml-3 float-right btn-lg">
                <i class="fa-solid fa-arrows-rotate"></i> Check for Update
            </button>
            <button title="Performs an update command on OctoFarm to the latest version"
                    id="update-octofarm" type="button"
                    class="btn btn-outline-success ml-3 float-right btn-lg"
                    disabled>
                <i class="fa-solid fa-download"></i> Update OctoFarm
            </button>
        </div>
    </div>
    <div class="col-12 col-md-4 col-lg-2">
        <%- include(singleStat, {
        statType: "info",
        statSpacing: "1",
        statIcon: "fas fa-code-branch fa-xl",
        statTitle: "Current Server Version",
        statLink: {
            url: releasesURL + serverVersion,
            title: serverVersion
        }
        })
        %>
    </div>
    <div class="col-12 col-md-4 col-lg-2">
        <%- include(singleStat, {
        statType: "info",
        statSpacing: "1",
        statIcon: "fas fa-code-branch fa-xl",
        statTitle: "Current Client Version",
        statLink: {
        url: releasesURL + clientVersion,
        title: clientVersion
        }
        })
        %>
    </div>
    <div class="col-12 col-md-4 col-lg-2">
        <% if(!serviceInformation?.update?.latestReleaseKnown){ %>
            <%- include(singleStat, {
            statType: "info",
            statSpacing: "1",
            statIcon: "fas fa-code-branch fa-xl",
            statTitle: "Latest Server Version",
            statLink: {
            url: releasesURL + serviceInformation?.update?.current_version,
            title: serviceInformation?.update?.current_version
            }
            })
            %>
        <% }else{ %>
                <%- include(singleStat, {
                statType: "info",
                statSpacing: "1",
                statIcon: "fas fa-code-branch fa-xl",
                statTitle: "Latest Server Version",
                statLink: {
                url: serviceInformation?.update?.latestReleaseKnown.html_url,
                title: serviceInformation?.update?.latestReleaseKnown.name
                }
                })
                %>
        <% } %>
    </div>
</div>
<div class="row">
    <div class="col-12 col-md-6">
        <% if(Object.keys(latestReleaseNotes).length !== 0){ %>
            <h3> Current Release Notes </h3><hr><br>
            <%- helpers.replaceGithubIcons(latestReleaseNotes.body) %>
        <% } %>
    </div>
    <% if(futureReleaseNotes.length > 0){ %>
    <div class="col-12 col-md-6">
        <h3> Future Release Notes </h3><hr><br>
        <% futureReleaseNotes.forEach(release => { %>
            <%- helpers.replaceGithubIcons(release.body) %>
        <% }) %>
    </div>
    <% } %>
</div>
<script>

</script>
