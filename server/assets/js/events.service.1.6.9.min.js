/*! For license information please see events.service.1.6.9.min.js.LICENSE.txt */
(()=>{var e={2650:e=>{e.exports={MESSAGE_TYPES:{AM_I_ALIVE:"am_i_alive",FILE_UPDATE:"file_update",CURRENT_OPERATIONS:"current_op",NEW_CAMERA_IMAGE:"new_camera_image"}}},2868:(e,t,n)=>{e.exports=n(1867)},3155:(e,t,n)=>{"use strict";var o=n(4030),r=n(8079),i=n(4687),s=n(7512),a=n(9791),c=n(924),u=n(5903),l=n(7517),d=n(1307),f=n(7097),p=n(9384);e.exports=function(e){return new Promise((function(t,n){var m,h=e.data,g=e.headers,y=e.responseType;function v(){e.cancelToken&&e.cancelToken.unsubscribe(m),e.signal&&e.signal.removeEventListener("abort",m)}o.isFormData(h)&&o.isStandardBrowserEnv()&&delete g["Content-Type"];var w=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",E=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(b+":"+E)}var S=a(e.baseURL,e.url);function _(){if(w){var o="getAllResponseHeaders"in w?c(w.getAllResponseHeaders()):null,i={data:y&&"text"!==y&&"json"!==y?w.response:w.responseText,status:w.status,statusText:w.statusText,headers:o,config:e,request:w};r((function(e){t(e),v()}),(function(e){n(e),v()}),i),w=null}}if(w.open(e.method.toUpperCase(),s(S,e.params,e.paramsSerializer),!0),w.timeout=e.timeout,"onloadend"in w?w.onloadend=_:w.onreadystatechange=function(){w&&4===w.readyState&&(0!==w.status||w.responseURL&&0===w.responseURL.indexOf("file:"))&&setTimeout(_)},w.onabort=function(){w&&(n(new d("Request aborted",d.ECONNABORTED,e,w)),w=null)},w.onerror=function(){n(new d("Network Error",d.ERR_NETWORK,e,w,w)),w=null},w.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",o=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new d(t,o.clarifyTimeoutError?d.ETIMEDOUT:d.ECONNABORTED,e,w)),w=null},o.isStandardBrowserEnv()){var P=(e.withCredentials||u(S))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;P&&(g[e.xsrfHeaderName]=P)}"setRequestHeader"in w&&o.forEach(g,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete g[t]:w.setRequestHeader(t,e)})),o.isUndefined(e.withCredentials)||(w.withCredentials=!!e.withCredentials),y&&"json"!==y&&(w.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&w.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&w.upload&&w.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(m=function(e){w&&(n(!e||e&&e.type?new f:e),w.abort(),w=null)},e.cancelToken&&e.cancelToken.subscribe(m),e.signal&&(e.signal.aborted?m():e.signal.addEventListener("abort",m))),h||(h=null);var T=p(S);T&&-1===["http","https","file"].indexOf(T)?n(new d("Unsupported protocol "+T+":",d.ERR_BAD_REQUEST,e)):w.send(h)}))}},1867:(e,t,n)=>{"use strict";var o=n(4030),r=n(3843),i=n(5891),s=n(3316),a=function e(t){var n=new i(t),a=r(i.prototype.request,n);return o.extend(a,i.prototype,n),o.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(9904));a.Axios=i,a.CanceledError=n(7097),a.CancelToken=n(9747),a.isCancel=n(9416),a.VERSION=n(6578).version,a.toFormData=n(3251),a.AxiosError=n(1307),a.Cancel=a.CanceledError,a.all=function(e){return Promise.all(e)},a.spread=n(1545),a.isAxiosError=n(232),e.exports=a,e.exports.default=a},9747:(e,t,n)=>{"use strict";var o=n(7097);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,o=n._listeners.length;for(t=0;t<o;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,o=new Promise((function(e){n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e){n.reason||(n.reason=new o(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},7097:(e,t,n)=>{"use strict";var o=n(1307);function r(e){o.call(this,null==e?"canceled":e,o.ERR_CANCELED),this.name="CanceledError"}n(4030).inherits(r,o,{__CANCEL__:!0}),e.exports=r},9416:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},5891:(e,t,n)=>{"use strict";var o=n(4030),r=n(7512),i=n(8036),s=n(884),a=n(3316),c=n(9791),u=n(9084),l=u.validators;function d(e){this.defaults=e,this.interceptors={request:new i,response:new i}}d.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var o=[],r=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var i,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!r){var d=[s,void 0];for(Array.prototype.unshift.apply(d,o),d=d.concat(c),i=Promise.resolve(t);d.length;)i=i.then(d.shift(),d.shift());return i}for(var f=t;o.length;){var p=o.shift(),m=o.shift();try{f=p(f)}catch(e){m(e);break}}try{i=s(f)}catch(e){return Promise.reject(e)}for(;c.length;)i=i.then(c.shift(),c.shift());return i},d.prototype.getUri=function(e){e=a(this.defaults,e);var t=c(e.baseURL,e.url);return r(t,e.params,e.paramsSerializer)},o.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),o.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,r){return this.request(a(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}d.prototype[e]=t(),d.prototype[e+"Form"]=t(!0)})),e.exports=d},1307:(e,t,n)=>{"use strict";var o=n(4030);function r(e,t,n,o,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r)}o.inherits(r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=r.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){s[e]={value:e}})),Object.defineProperties(r,s),Object.defineProperty(i,"isAxiosError",{value:!0}),r.from=function(e,t,n,s,a,c){var u=Object.create(i);return o.toFlatObject(e,u,(function(e){return e!==Error.prototype})),r.call(u,e.message,t,n,s,a),u.name=e.name,c&&Object.assign(u,c),u},e.exports=r},8036:(e,t,n)=>{"use strict";var o=n(4030);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},9791:(e,t,n)=>{"use strict";var o=n(957),r=n(7050);e.exports=function(e,t){return e&&!o(t)?r(e,t):t}},884:(e,t,n)=>{"use strict";var o=n(4030),r=n(8630),i=n(9416),s=n(9904),a=n(7097);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),o.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},3316:(e,t,n)=>{"use strict";var o=n(4030);e.exports=function(e,t){t=t||{};var n={};function r(e,t){return o.isPlainObject(e)&&o.isPlainObject(t)?o.merge(e,t):o.isPlainObject(t)?o.merge({},t):o.isArray(t)?t.slice():t}function i(n){return o.isUndefined(t[n])?o.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function s(e){if(!o.isUndefined(t[e]))return r(void 0,t[e])}function a(n){return o.isUndefined(t[n])?o.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function c(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return o.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||i,r=t(e);o.isUndefined(r)&&t!==c||(n[e]=r)})),n}},8079:(e,t,n)=>{"use strict";var o=n(1307);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new o("Request failed with status code "+n.status,[o.ERR_BAD_REQUEST,o.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},8630:(e,t,n)=>{"use strict";var o=n(4030),r=n(9904);e.exports=function(e,t,n){var i=this||r;return o.forEach(n,(function(n){e=n.call(i,e,t)})),e}},9904:(e,t,n)=>{"use strict";var o=n(4030),r=n(7122),i=n(1307),s=n(7517),a=n(3251),c={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,d={transitional:s,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(l=n(3155)),l),transformRequest:[function(e,t){if(r(t,"Accept"),r(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e))return e;if(o.isArrayBufferView(e))return e.buffer;if(o.isURLSearchParams(e))return u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,i=o.isObject(e),s=t&&t["Content-Type"];if((n=o.isFileList(e))||i&&"multipart/form-data"===s){var c=this.env&&this.env.FormData;return a(n?{"files[]":e}:e,c&&new c)}return i||"application/json"===s?(u(t,"application/json"),function(e,t,n){if(o.isString(e))try{return(0,JSON.parse)(e),o.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||d.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||r&&o.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw i.from(e,i.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(7159)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(e){d.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){d.headers[e]=o.merge(c)})),e.exports=d},7517:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},6578:e=>{e.exports={version:"0.27.2"}},3843:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(t,n)}}},7512:(e,t,n)=>{"use strict";var o=n(4030);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(o.isURLSearchParams(t))i=t.toString();else{var s=[];o.forEach(t,(function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,(function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))})))})),i=s.join("&")}if(i){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},7050:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4687:(e,t,n)=>{"use strict";var o=n(4030);e.exports=o.isStandardBrowserEnv()?{write:function(e,t,n,r,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),o.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),o.isString(r)&&a.push("path="+r),o.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},957:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},232:(e,t,n)=>{"use strict";var o=n(4030);e.exports=function(e){return o.isObject(e)&&!0===e.isAxiosError}},5903:(e,t,n)=>{"use strict";var o=n(4030);e.exports=o.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var o=e;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=o.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},7122:(e,t,n)=>{"use strict";var o=n(4030);e.exports=function(e,t){o.forEach(e,(function(n,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[o])}))}},7159:e=>{e.exports=null},924:(e,t,n)=>{"use strict";var o=n(4030),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(o.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=o.trim(e.substr(0,i)).toLowerCase(),n=o.trim(e.substr(i+1)),t){if(s[t]&&r.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},9384:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},1545:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},3251:(e,t,n)=>{"use strict";var o=n(4030);e.exports=function(e,t){t=t||new FormData;var n=[];function r(e){return null===e?"":o.isDate(e)?e.toISOString():o.isArrayBuffer(e)||o.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(i,s){if(o.isPlainObject(i)||o.isArray(i)){if(-1!==n.indexOf(i))throw Error("Circular reference detected in "+s);n.push(i),o.forEach(i,(function(n,i){if(!o.isUndefined(n)){var a,c=s?s+"."+i:i;if(n&&!s&&"object"==typeof n)if(o.endsWith(i,"{}"))n=JSON.stringify(n);else if(o.endsWith(i,"[]")&&(a=o.toArray(n)))return void a.forEach((function(e){!o.isUndefined(e)&&t.append(c,r(e))}));e(n,c)}})),n.pop()}else t.append(s,r(i))}(e),t}},9084:(e,t,n)=>{"use strict";var o=n(6578).version,r=n(1307),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+o+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,o,a){if(!1===e)throw new r(i(o," has been removed"+(t?" in "+t:"")),r.ERR_DEPRECATED);return t&&!s[o]&&(s[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,a)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new r("options must be an object",r.ERR_BAD_OPTION_VALUE);for(var o=Object.keys(e),i=o.length;i-- >0;){var s=o[i],a=t[s];if(a){var c=e[s],u=void 0===c||a(c,s,e);if(!0!==u)throw new r("option "+s+" must be "+u,r.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new r("Unknown option "+s,r.ERR_BAD_OPTION)}},validators:i}},4030:(e,t,n)=>{"use strict";var o,r=n(3843),i=Object.prototype.toString,s=(o=Object.create(null),function(e){var t=i.call(e);return o[t]||(o[t]=t.slice(8,-1).toLowerCase())});function a(e){return e=e.toLowerCase(),function(t){return s(t)===e}}function c(e){return Array.isArray(e)}function u(e){return void 0===e}var l=a("ArrayBuffer");function d(e){return null!==e&&"object"==typeof e}function f(e){if("object"!==s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var p=a("Date"),m=a("File"),h=a("Blob"),g=a("FileList");function y(e){return"[object Function]"===i.call(e)}var v=a("URLSearchParams");function w(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var b,E=(b="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return b&&e instanceof b});e.exports={isArray:c,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||i.call(e)===t||y(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:d,isPlainObject:f,isUndefined:u,isDate:p,isFile:m,isBlob:h,isFunction:y,isStream:function(e){return d(e)&&y(e.pipe)},isURLSearchParams:v,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:w,merge:function e(){var t={};function n(n,o){f(t[o])&&f(n)?t[o]=e(t[o],n):f(n)?t[o]=e({},n):c(n)?t[o]=n.slice():t[o]=n}for(var o=0,r=arguments.length;o<r;o++)w(arguments[o],n);return t},extend:function(e,t,n){return w(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,o){e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var o,r,i,s={};t=t||{};do{for(r=(o=Object.getOwnPropertyNames(e)).length;r-- >0;)s[i=o[r]]||(t[i]=e[i],s[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:a,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var o=e.indexOf(t,n);return-1!==o&&o===n},toArray:function(e){if(!e)return null;var t=e.length;if(u(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:E,isFileList:g}},6092:function(e){var t;t=function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.css=t.deepExtend=t.animationEndEvents=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.inArray=function(e,t,n){var o=void 0;if(n){for(o in t)if(t.hasOwnProperty(o)&&t[o]===e)return!0}else for(o in t)if(t.hasOwnProperty(o)&&t[o]===e)return!0;return!1},t.stopPropagation=function(e){void 0!==(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.generateID=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="noty_"+e+"_";return t+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.outerHeight=function(e){var t=e.offsetHeight,n=window.getComputedStyle(e);return t+(parseInt(n.marginTop)+parseInt(n.marginBottom))},t.addListener=i,t.hasClass=s,t.addClass=function(e,t){var n=c(e),o=n+t;s(n,t)||(e.className=o.substring(1))},t.removeClass=function(e,t){var n=c(e),o=void 0;s(e,t)&&(o=n.replace(" "+t+" "," "),e.className=o.substring(1,o.length-1))},t.remove=a,t.classList=c,t.visibilityChangeFlow=function(){var e=void 0,t=void 0;function n(){r.PageHidden?setTimeout((function(){Object.keys(r.Store).forEach((function(e){r.Store.hasOwnProperty(e)&&r.Store[e].options.visibilityControl&&r.Store[e].stop()}))}),100):setTimeout((function(){Object.keys(r.Store).forEach((function(e){r.Store.hasOwnProperty(e)&&r.Store[e].options.visibilityControl&&r.Store[e].resume()})),r.queueRenderAll()}),100)}void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),t&&i(document,t,(function(){r.PageHidden=document[e],n()})),i(window,"blur",(function(){r.PageHidden=!0,n()})),i(window,"focus",(function(){r.PageHidden=!1,n()}))},t.createAudioElements=function(e){if(e.hasSound){var t=document.createElement("audio");e.options.sounds.sources.forEach((function(e){var n=document.createElement("source");n.src=e,n.type="audio/"+e.match(/\.([^.]+)$/)[1],t.appendChild(n)})),e.barDom?e.barDom.appendChild(t):document.querySelector("body").appendChild(t),t.volume=e.options.sounds.volume,e.soundPlayed||(t.play(),e.soundPlayed=!0),t.onended=function(){a(t)}}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));function i(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t=t.split(" ");for(var r=0;r<t.length;r++)document.addEventListener?e.addEventListener(t[r],n,o):document.attachEvent&&e.attachEvent("on"+t[r],n)}function s(e,t){return("string"==typeof e?e:c(e)).indexOf(" "+t+" ")>=0}function a(e){e.parentNode&&e.parentNode.removeChild(e)}function c(e){return(" "+(e&&e.className||"")+" ").replace(/\s+/gi," ")}t.animationEndEvents="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",t.deepExtend=function e(t){t=t||{};for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)r.hasOwnProperty(i)&&(Array.isArray(r[i])?t[i]=r[i]:"object"===o(r[i])&&null!==r[i]?t[i]=e(t[i],r[i]):t[i]=r[i])}return t},t.css=function(){var e=["Webkit","O","Moz","ms"],t={};function n(n,o,r){var i;i=(i=o).replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(e,t){return t.toUpperCase()})),o=t[i]||(t[i]=function(t){var n=document.body.style;if(t in n)return t;for(var o=e.length,r=t.charAt(0).toUpperCase()+t.slice(1),i=void 0;o--;)if((i=e[o]+r)in n)return i;return t}(i)),n.style[o]=r}return function(e,t){var o=arguments,r=void 0,i=void 0;if(2===o.length)for(r in t)t.hasOwnProperty(r)&&void 0!==(i=t[r])&&t.hasOwnProperty(r)&&n(e,r,i);else n(e,o[1],o[2])}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=t.Store=t.Queues=t.DefaultMaxVisible=t.docTitle=t.DocModalCount=t.PageHidden=void 0,t.getQueueCounts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global",t=0,n=a;return c.hasOwnProperty(e)&&(n=c[e].maxVisible,Object.keys(u).forEach((function(n){u[n].options.queue!==e||u[n].closed||t++}))),{current:t,maxVisible:n}},t.addToQueue=function(e){c.hasOwnProperty(e.options.queue)||(c[e.options.queue]={maxVisible:a,queue:[]}),c[e.options.queue].queue.push(e)},t.removeFromQueue=function(e){if(c.hasOwnProperty(e.options.queue)){var t=[];Object.keys(c[e.options.queue].queue).forEach((function(n){c[e.options.queue].queue[n].id!==e.id&&t.push(c[e.options.queue].queue[n])})),c[e.options.queue].queue=t}},t.queueRender=l,t.queueRenderAll=function(){Object.keys(c).forEach((function(e){l(e)}))},t.ghostFix=function(e){var t=o.generateID("ghost"),n=document.createElement("div");n.setAttribute("id",t),o.css(n,{height:o.outerHeight(e.barDom)+"px"}),e.barDom.insertAdjacentHTML("afterend",n.outerHTML),o.remove(e.barDom),n=document.getElementById(t),o.addClass(n,"noty_fix_effects_height"),o.addListener(n,o.animationEndEvents,(function(){o.remove(n)}))},t.build=function(e){!function(e){if(e.options.container)e.layoutDom=document.querySelector(e.options.container);else{var t="noty_layout__"+e.options.layout;e.layoutDom=document.querySelector("div#"+t),e.layoutDom||(e.layoutDom=document.createElement("div"),e.layoutDom.setAttribute("id",t),e.layoutDom.setAttribute("role","alert"),e.layoutDom.setAttribute("aria-live","polite"),o.addClass(e.layoutDom,"noty_layout"),document.querySelector("body").appendChild(e.layoutDom))}}(e);var t='<div class="noty_body">'+e.options.text+"</div>"+function(e){if(d(e)){var t=document.createElement("div");return o.addClass(t,"noty_buttons"),Object.keys(e.options.buttons).forEach((function(n){t.appendChild(e.options.buttons[n].dom)})),e.options.buttons.forEach((function(e){t.appendChild(e.dom)})),t.outerHTML}return""}(e)+'<div class="noty_progressbar"></div>';e.barDom=document.createElement("div"),e.barDom.setAttribute("id",e.id),o.addClass(e.barDom,"noty_bar noty_type__"+e.options.type+" noty_theme__"+e.options.theme),e.barDom.innerHTML=t,m(e,"onTemplate")},t.hasButtons=d,t.handleModal=function(e){var n,i;e.options.modal&&(0===r&&(n=document.querySelector("body"),i=document.createElement("div"),o.addClass(i,"noty_modal"),n.insertBefore(i,n.firstChild),o.addClass(i,"noty_modal_open"),o.addListener(i,o.animationEndEvents,(function(){o.removeClass(i,"noty_modal_open")}))),t.DocModalCount=r+=1)},t.handleModalClose=function(e){if(e.options.modal&&r>0&&(t.DocModalCount=r-=1,r<=0)){var n=document.querySelector(".noty_modal");n&&(o.removeClass(n,"noty_modal_open"),o.addClass(n,"noty_modal_close"),o.addListener(n,o.animationEndEvents,(function(){o.remove(n)})))}},t.queueClose=f,t.dequeueClose=p,t.fire=m,t.openFlow=function(e){m(e,"afterShow"),f(e),o.addListener(e.barDom,"mouseenter",(function(){p(e)})),o.addListener(e.barDom,"mouseleave",(function(){f(e)}))},t.closeFlow=function(e){delete u[e.id],e.closing=!1,m(e,"afterClose"),o.remove(e.barDom),0!==e.layoutDom.querySelectorAll(".noty_bar").length||e.options.container||o.remove(e.layoutDom),(o.inArray("docVisible",e.options.titleCount.conditions)||o.inArray("docHidden",e.options.titleCount.conditions))&&s.decrement(),l(e.options.queue)};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));t.PageHidden=!1;var r=t.DocModalCount=0,i={originalTitle:null,count:0,changed:!1,timer:-1},s=t.docTitle={increment:function(){i.count++,s._update()},decrement:function(){i.count--,i.count<=0?s._clear():s._update()},_update:function(){var e=document.title;i.changed?document.title="("+i.count+") "+i.originalTitle:(i.originalTitle=e,document.title="("+i.count+") "+e,i.changed=!0)},_clear:function(){i.changed&&(i.count=0,document.title=i.originalTitle,i.changed=!1)}},a=t.DefaultMaxVisible=5,c=t.Queues={global:{maxVisible:a,queue:[]}},u=t.Store={};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global";if(c.hasOwnProperty(e)){var t=c[e].queue.shift();t&&t.show()}}function d(e){return!(!e.options.buttons||!Object.keys(e.options.buttons).length)}function f(e){e.options.timeout&&(e.options.progressBar&&e.progressDom&&o.css(e.progressDom,{transition:"width "+e.options.timeout+"ms linear",width:"0%"}),clearTimeout(e.closeTimer),e.closeTimer=setTimeout((function(){e.close()}),e.options.timeout))}function p(e){e.options.timeout&&e.closeTimer&&(clearTimeout(e.closeTimer),e.closeTimer=-1,e.options.progressBar&&e.progressDom&&o.css(e.progressDom,{transition:"width 0ms linear",width:"100%"}))}function m(e,t){e.listeners.hasOwnProperty(t)&&e.listeners[t].forEach((function(t){"function"==typeof t&&t.apply(e)}))}t.Defaults={type:"alert",layout:"topRight",theme:"mint",text:"",timeout:!1,progressBar:!0,closeWith:["click"],animation:{open:"noty_effects_open",close:"noty_effects_close"},id:!1,force:!1,killer:!1,queue:"global",container:!1,buttons:[],callbacks:{beforeShow:null,onShow:null,afterShow:null,onClose:null,afterClose:null,onClick:null,onHover:null,onTemplate:null},sounds:{sources:[],volume:1,conditions:[]},titleCount:{conditions:[]},modal:!1,visibilityControl:!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotyButton=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.NotyButton=function e(t,n,i){var s=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r(this,e),this.dom=document.createElement("button"),this.dom.innerHTML=t,this.id=a.id=a.id||o.generateID("button"),this.cb=i,Object.keys(a).forEach((function(e){s.dom.setAttribute(e,a[e])})),o.addClass(this.dom,n||"noty_btn"),this}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.Push=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/service-worker.js";return r(this,e),this.subData={},this.workerPath=t,this.listeners={onPermissionGranted:[],onPermissionDenied:[],onSubscriptionSuccess:[],onSubscriptionCancel:[],onWorkerError:[],onWorkerSuccess:[],onWorkerNotSupported:[]},this}return o(e,[{key:"on",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return"function"==typeof t&&this.listeners.hasOwnProperty(e)&&this.listeners[e].push(t),this}},{key:"fire",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.listeners.hasOwnProperty(e)&&this.listeners[e].forEach((function(e){"function"==typeof e&&e.apply(t,n)}))}},{key:"create",value:function(){console.log("NOT IMPLEMENTED YET")}},{key:"isSupported",value:function(){var e=!1;try{e=window.Notification||window.webkitNotifications||navigator.mozNotification||window.external&&void 0!==window.external.msIsSiteMode()}catch(e){}return e}},{key:"getPermissionStatus",value:function(){var e="default";if(window.Notification&&window.Notification.permissionLevel)e=window.Notification.permissionLevel;else if(window.webkitNotifications&&window.webkitNotifications.checkPermission)switch(window.webkitNotifications.checkPermission()){case 1:e="default";break;case 0:e="granted";break;default:e="denied"}else window.Notification&&window.Notification.permission?e=window.Notification.permission:navigator.mozNotification?e="granted":window.external&&void 0!==window.external.msIsSiteMode()&&(e=window.external.msIsSiteMode()?"granted":"default");return e.toString().toLowerCase()}},{key:"getEndpoint",value:function(e){var t=e.endpoint,n=e.subscriptionId;return n&&-1===t.indexOf(n)&&(t+="/"+n),t}},{key:"isSWRegistered",value:function(){try{return"activated"===navigator.serviceWorker.controller.state}catch(e){return!1}}},{key:"unregisterWorker",value:function(){var e=this;"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then((function(t){var n=!0,o=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)i.value.unregister(),e.fire("onSubscriptionCancel")}catch(e){o=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}}))}},{key:"requestSubscription",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this,o=this.getPermissionStatus(),r=function(o){"granted"===o?(e.fire("onPermissionGranted"),"serviceWorker"in navigator?navigator.serviceWorker.register(e.workerPath).then((function(){navigator.serviceWorker.ready.then((function(e){n.fire("onWorkerSuccess"),e.pushManager.subscribe({userVisibleOnly:t}).then((function(e){var t=e.getKey("p256dh"),o=e.getKey("auth");n.subData={endpoint:n.getEndpoint(e),p256dh:t?window.btoa(String.fromCharCode.apply(null,new Uint8Array(t))):null,auth:o?window.btoa(String.fromCharCode.apply(null,new Uint8Array(o))):null},n.fire("onSubscriptionSuccess",[n.subData])})).catch((function(e){n.fire("onWorkerError",[e])}))}))})):n.fire("onWorkerNotSupported")):"denied"===o&&(e.fire("onPermissionDenied"),e.unregisterWorker())};"default"===o?window.Notification&&window.Notification.requestPermission?window.Notification.requestPermission(r):window.webkitNotifications&&window.webkitNotifications.checkPermission&&window.webkitNotifications.requestPermission(r):r(o)}}]),e}()},function(e,t,n){(function(t,o){var r;r=function(){"use strict";function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,s=void 0,a=void 0,c=function(e,t){h[i]=e,h[i+1]=t,2===(i+=2)&&(a?a(g):E())},u="undefined"!=typeof window?window:void 0,l=u||{},d=l.MutationObserver||l.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){var e=setTimeout;return function(){return e(g,1)}}var h=new Array(1e3);function g(){for(var e=0;e<i;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;i=0}var y,v,w,b,E=void 0;function S(e,t){var n=arguments,o=this,r=new this.constructor(T);void 0===r[P]&&F(r);var i,s=o._state;return s?(i=n[s-1],c((function(){return U(s,r,i,o._result)}))):I(o,r,e,t),r}function _(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(T);return x(t,e),t}f?E=function(){return t.nextTick(g)}:d?(v=0,w=new d(g),b=document.createTextNode(""),w.observe(b,{characterData:!0}),E=function(){b.data=v=++v%2}):p?((y=new MessageChannel).port1.onmessage=g,E=function(){return y.port2.postMessage(0)}):E=void 0===u?function(){try{var e=n(9);return void 0!==(s=e.runOnLoop||e.runOnContext)?function(){s(g)}:m()}catch(e){return m()}}():m();var P=Math.random().toString(36).substring(16);function T(){}var O=void 0,R=new $;function C(e){try{return e.then}catch(e){return R.error=e,R}}function A(t,n,o){n.constructor===t.constructor&&o===S&&n.constructor.resolve===_?function(e,t){1===t._state?N(e,t._result):2===t._state?D(e,t._result):I(t,void 0,(function(t){return x(e,t)}),(function(t){return D(e,t)}))}(t,n):o===R?(D(t,R.error),R.error=null):void 0===o?N(t,n):e(o)?function(e,t,n){c((function(e){var o=!1,r=function(n,r,i,s){try{n.call(r,(function(n){o||(o=!0,t!==n?x(e,n):N(e,n))}),(function(t){o||(o=!0,D(e,t))}))}catch(e){return e}}(n,t,0,0,e._label);!o&&r&&(o=!0,D(e,r))}),e)}(t,n,o):N(t,n)}function x(e,t){var n,o;e===t?D(e,new TypeError("You cannot resolve a promise with itself")):(o=typeof(n=t),null===n||"object"!==o&&"function"!==o?N(e,t):A(e,t,C(t)))}function L(e){e._onerror&&e._onerror(e._result),k(e)}function N(e,t){e._state===O&&(e._result=t,e._state=1,0!==e._subscribers.length&&c(k,e))}function D(e,t){e._state===O&&(e._state=2,e._result=t,c(L,e))}function I(e,t,n,o){var r=e._subscribers,i=r.length;e._onerror=null,r[i]=t,r[i+1]=n,r[i+2]=o,0===i&&e._state&&c(k,e)}function k(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var o=void 0,r=void 0,i=e._result,s=0;s<t.length;s+=3)o=t[s],r=t[s+n],o?U(n,o,r,i):r(i);e._subscribers.length=0}}function $(){this.error=null}var B=new $;function U(t,n,o,r){var i=e(o),s=void 0,a=void 0,c=void 0,u=void 0;if(i){if(s=function(e,t){try{return e(t)}catch(e){return B.error=e,B}}(o,r),s===B?(u=!0,a=s.error,s.error=null):c=!0,n===s)return void D(n,new TypeError("A promises callback cannot return that same promise."))}else s=r,c=!0;n._state!==O||(i&&c?x(n,s):u?D(n,a):1===t?N(n,s):2===t&&D(n,s))}var M=0;function F(e){e[P]=M++,e._state=void 0,e._result=void 0,e._subscribers=[]}function j(e,t){this._instanceConstructor=e,this.promise=new e(T),this.promise[P]||F(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?N(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&N(this.promise,this._result))):D(this.promise,new Error("Array Methods must be provided an Array"))}function H(e){this[P]=M++,this._result=this._state=void 0,this._subscribers=[],T!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof H?function(e,t){try{t((function(t){x(e,t)}),(function(t){D(e,t)}))}catch(t){D(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return j.prototype._enumerate=function(e){for(var t=0;this._state===O&&t<e.length;t++)this._eachEntry(e[t],t)},j.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,o=n.resolve;if(o===_){var r=C(e);if(r===S&&e._state!==O)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===H){var i=new n(T);A(i,e,r),this._willSettleAt(i,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(o(e),t)},j.prototype._settledAt=function(e,t,n){var o=this.promise;o._state===O&&(this._remaining--,2===e?D(o,n):this._result[t]=n),0===this._remaining&&N(o,this._result)},j.prototype._willSettleAt=function(e,t){var n=this;I(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},H.all=function(e){return new j(this,e).promise},H.race=function(e){var t=this;return r(e)?new t((function(n,o){for(var r=e.length,i=0;i<r;i++)t.resolve(e[i]).then(n,o)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},H.resolve=_,H.reject=function(e){var t=new this(T);return D(t,e),t},H._setScheduler=function(e){a=e},H._setAsap=function(e){c=e},H._asap=c,H.prototype={constructor:H,then:S,catch:function(e){return this.then(null,e)}},H.polyfill=function(){var e=void 0;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=H},H.Promise=H,H},e.exports=r()}).call(t,n(7),n(8))},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(5);var r,i=(r=n(4))&&r.__esModule?r:{default:r},s=l(n(0)),a=l(n(1)),c=n(2),u=n(3);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d(this,e),this.options=s.deepExtend({},a.Defaults,t),a.Store[this.options.id]?a.Store[this.options.id]:(this.id=this.options.id||s.generateID("bar"),this.closeTimer=-1,this.barDom=null,this.layoutDom=null,this.progressDom=null,this.showing=!1,this.shown=!1,this.closed=!1,this.closing=!1,this.killable=this.options.timeout||this.options.closeWith.length>0,this.hasSound=this.options.sounds.sources.length>0,this.soundPlayed=!1,this.listeners={beforeShow:[],onShow:[],afterShow:[],onClose:[],afterClose:[],onClick:[],onHover:[],onTemplate:[]},this.promises={show:null,close:null},this.on("beforeShow",this.options.callbacks.beforeShow),this.on("onShow",this.options.callbacks.onShow),this.on("afterShow",this.options.callbacks.afterShow),this.on("onClose",this.options.callbacks.onClose),this.on("afterClose",this.options.callbacks.afterClose),this.on("onClick",this.options.callbacks.onClick),this.on("onHover",this.options.callbacks.onHover),this.on("onTemplate",this.options.callbacks.onTemplate),this)}return o(e,[{key:"on",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return"function"==typeof t&&this.listeners.hasOwnProperty(e)&&this.listeners[e].push(t),this}},{key:"show",value:function(){var t=this;if(this.showing||this.shown)return this;!0===this.options.killer?e.closeAll():"string"==typeof this.options.killer&&e.closeAll(this.options.killer);var n=a.getQueueCounts(this.options.queue);if(n.current>=n.maxVisible||a.PageHidden&&this.options.visibilityControl)return a.addToQueue(this),a.PageHidden&&this.hasSound&&s.inArray("docHidden",this.options.sounds.conditions)&&s.createAudioElements(this),a.PageHidden&&s.inArray("docHidden",this.options.titleCount.conditions)&&a.docTitle.increment(),this;if(a.Store[this.id]=this,a.fire(this,"beforeShow"),this.showing=!0,this.closing)return this.showing=!1,this;if(a.build(this),a.handleModal(this),this.options.force?this.layoutDom.insertBefore(this.barDom,this.layoutDom.firstChild):this.layoutDom.appendChild(this.barDom),this.hasSound&&!this.soundPlayed&&s.inArray("docVisible",this.options.sounds.conditions)&&s.createAudioElements(this),s.inArray("docVisible",this.options.titleCount.conditions)&&a.docTitle.increment(),this.shown=!0,this.closed=!1,a.hasButtons(this)&&Object.keys(this.options.buttons).forEach((function(e){var n=t.barDom.querySelector("#"+t.options.buttons[e].id);s.addListener(n,"click",(function(n){s.stopPropagation(n),t.options.buttons[e].cb(t)}))})),this.progressDom=this.barDom.querySelector(".noty_progressbar"),s.inArray("click",this.options.closeWith)&&(s.addClass(this.barDom,"noty_close_with_click"),s.addListener(this.barDom,"click",(function(e){s.stopPropagation(e),a.fire(t,"onClick"),t.close()}),!1)),s.addListener(this.barDom,"mouseenter",(function(){a.fire(t,"onHover")}),!1),this.options.timeout&&s.addClass(this.barDom,"noty_has_timeout"),this.options.progressBar&&s.addClass(this.barDom,"noty_has_progressbar"),s.inArray("button",this.options.closeWith)){s.addClass(this.barDom,"noty_close_with_button");var o=document.createElement("div");s.addClass(o,"noty_close_button"),o.innerHTML="×",this.barDom.appendChild(o),s.addListener(o,"click",(function(e){s.stopPropagation(e),t.close()}),!1)}return a.fire(this,"onShow"),null===this.options.animation.open?this.promises.show=new i.default((function(e){e()})):"function"==typeof this.options.animation.open?this.promises.show=new i.default(this.options.animation.open.bind(this)):(s.addClass(this.barDom,this.options.animation.open),this.promises.show=new i.default((function(e){s.addListener(t.barDom,s.animationEndEvents,(function(){s.removeClass(t.barDom,t.options.animation.open),e()}))}))),this.promises.show.then((function(){var e=t;setTimeout((function(){a.openFlow(e)}),100)})),this}},{key:"stop",value:function(){return a.dequeueClose(this),this}},{key:"resume",value:function(){return a.queueClose(this),this}},{key:"setTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){if(this.stop(),this.options.timeout=e,this.barDom){this.options.timeout?s.addClass(this.barDom,"noty_has_timeout"):s.removeClass(this.barDom,"noty_has_timeout");var t=this;setTimeout((function(){t.resume()}),100)}return this}))},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.barDom&&(this.barDom.querySelector(".noty_body").innerHTML=e),t&&(this.options.text=e),this}},{key:"setType",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.barDom){var o=s.classList(this.barDom).split(" ");o.forEach((function(e){"noty_type__"===e.substring(0,11)&&s.removeClass(t.barDom,e)})),s.addClass(this.barDom,"noty_type__"+e)}return n&&(this.options.type=e),this}},{key:"setTheme",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.barDom){var o=s.classList(this.barDom).split(" ");o.forEach((function(e){"noty_theme__"===e.substring(0,12)&&s.removeClass(t.barDom,e)})),s.addClass(this.barDom,"noty_theme__"+e)}return n&&(this.options.theme=e),this}},{key:"close",value:function(){var e=this;return this.closed?this:this.shown?(a.fire(this,"onClose"),this.closing=!0,null===this.options.animation.close||!1===this.options.animation.close?this.promises.close=new i.default((function(e){e()})):"function"==typeof this.options.animation.close?this.promises.close=new i.default(this.options.animation.close.bind(this)):(s.addClass(this.barDom,this.options.animation.close),this.promises.close=new i.default((function(t){s.addListener(e.barDom,s.animationEndEvents,(function(){e.options.force?s.remove(e.barDom):a.ghostFix(e),t()}))}))),this.promises.close.then((function(){a.closeFlow(e),a.handleModalClose(e)})),this.closed=!0,this):(a.removeFromQueue(this),this)}}],[{key:"closeAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object.keys(a.Store).forEach((function(t){e?a.Store[t].options.queue===e&&a.Store[t].killable&&a.Store[t].close():a.Store[t].killable&&a.Store[t].close()})),this}},{key:"clearQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global";return a.Queues.hasOwnProperty(e)&&(a.Queues[e].queue=[]),this}},{key:"overrideDefaults",value:function(e){return a.Defaults=s.deepExtend({},a.Defaults,e),this}},{key:"setMaxVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.DefaultMaxVisible,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";return a.Queues.hasOwnProperty(t)||(a.Queues[t]={maxVisible:e,queue:[]}),a.Queues[t].maxVisible=e,this}},{key:"button",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new c.NotyButton(e,t,n,o)}},{key:"version",value:function(){return"3.2.0-beta"}},{key:"Push",value:function(e){return new u.Push(e)}},{key:"Queues",get:function(){return a.Queues}},{key:"PageHidden",get:function(){return a.PageHidden}}]),e}();t.default=f,"undefined"!=typeof window&&s.visibilityChangeFlow(),e.exports=t.default},function(e,t){var n,o,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=a(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||l||a(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){}])},e.exports=t()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const{parse:e,stringify:t}=JSON,{keys:o}=Object,r=String,i={},s="object",a=(e,t)=>t,c=e=>e instanceof r?r(e):e,u=(e,t)=>"string"==typeof t?new r(t):t,l=(e,t,n,a)=>{const c=[];for(let u=o(n),{length:l}=u,d=0;d<l;d++){const o=u[d],l=n[o];if(l instanceof r){const r=e[l];typeof r!==s||t.has(r)?n[o]=a.call(n,o,r):(t.add(r),n[o]=i,c.push({k:o,a:[e,t,r,a]}))}else n[o]!==i&&(n[o]=a.call(n,o,l))}for(let{length:e}=c,t=0;t<e;t++){const{k:e,a:o}=c[t];n[e]=a.call(n,e,l.apply(null,o))}return n},d=function(e){return e&&"[object Function]"==={}.toString.call(e)};var f=n(2650);class p{static perc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return`${(null==e?void 0:e.toFixed(t))||0}%`}static toFixed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(null==e?void 0:e.toFixed(t))||0}static percentOf(e,t){return this.toFixed(t/100*e,2)}static generateTime(e){let t;if(void 0===e||isNaN(e)||null===e)t="No Time Estimate";else{let n=Math.floor(e/86400);e-=3600*n*24;let o=Math.floor(e/3600);e-=3600*o;let r=Math.floor(e/60);e-=60*r,t=`${n}d, ${o}h, ${r}m, ${e=Math.floor(e)}s`,0===r&&t.includes("0m")&&(t=t.replace(" 0m,","")),0===o&&t.includes("0h")&&(t=t.replace(" 0h,","")),0===n&&t.includes("0d")&&(t=t.replace("0d,","")),0===r&&0===o&&0===n&&0===e&&(t=t.replace("0s","Done"))}return t}static isBetween(e,t,n){return(e-t)*(e-n)<=0}static bytes(e,t){if(void 0===e||isNaN(e)||null===e)return"";if(0===e)return"0 Bytes";const n=t||2,o=Math.floor(Math.log(e)/Math.log(1024));return`<i class="fas fa-hdd"></i> ${parseFloat((e/Math.pow(1024,o)).toFixed(n))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}`}static dateClean(e){return new Date(e).toLocaleString()}static timeSince(e){const t=Date.now();return p.generateTime(t/1e3-e/1e3)}static generateCost(e){return e?e.toFixed(2):0}static getPercentage(e,t){return(100*e/t).toFixed(0)}static firstDayOfMonth(){const e=new Date;return new Date(e.getFullYear(),e.getMonth(),1)}static lastDayOfMonth(){const e=new Date;return new Date(e.getFullYear(),e.getMonth()+1,0)}}var m=n(6092),h=n.n(m);const g=[document.getElementById("printerSettingsModal"),document.getElementById("printerManagerModal"),document.getElementById("printerLogsModal"),document.getElementById("printerStatistics"),document.getElementById("printerSelectModal")];class y{static getColour(e){return"Operational"===e?{name:"secondary",hex:"#262626",category:"Idle"}:"Paused"===e?{name:"warning",hex:"#583c0e",category:"Idle"}:"Printing"===e||"Pausing"===e||"Cancelling"===e?{name:"warning",hex:"#583c0e",category:"Active"}:"Error"===e?{name:"danger",hex:"#2e0905",category:"Idle"}:"Offline"===e?{name:"danger",hex:"#2e0905",category:"Offline"}:"Searching..."===e?{name:"danger",hex:"#2e0905",category:"Idle"}:"Closed"===e?{name:"danger",hex:"#2e0905",category:"Closed"}:"Complete"===e?{name:"success",hex:"#00330e",category:"Complete"}:{name:"danger",hex:"#2e0905",category:"Offline"}}static createMessage(e,t){const n=document.getElementById(t),o=`\n      <div class="alert alert-${e.type} alert-dismissible fade show" role="alert">\n        ${e.msg}\n      <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n        <span aria-hidden="true">&times;</span>\n      </button>\n    </div>\n    `;n.insertAdjacentHTML("beforeend",o)}static createAlert(e,t,n,o){o=null!=o?["click"]:[],h().setMaxVisible(50);let r=new(h())({type:e,theme:"bootstrap-v4",closeWith:o,timeout:n,layout:"bottomRight",text:t});return r.show(),r}static doesElementNeedUpdating(e,t,n){e&&t&&n&&t&&JSON.stringify(e)!==JSON.stringify(t[n])&&(t[n]=e)}static clearSelect(e){document.querySelectorAll("*[id^="+e+"]").forEach((e=>{e.value=""}))}static addSelectListeners(e){document.querySelectorAll("*[id^="+e+"]").forEach((e=>{"input"===e.localName&&(e.addEventListener("focus",(t=>{e.value!==e.placeholder&&(e.value=e.placeholder)})),e.addEventListener("focusout",(t=>{e.value!==e.placeholder&&(e.placeholder=e.value)})))}))}static returnSpinnerTemplate(){return'<i class="fas fa-spinner fa-spin"></i>'}static removeLoaderFromElementInnerHTML(e){e&&e.innerHTML.includes("spinner")&&(e.innerHTML=e.innerHTML.replace(y.returnSpinnerTemplate(),""))}static addLoaderToElementsInnerHTML(e){e.innerHTML.includes("spinner")||(e.innerHTML+=y.returnSpinnerTemplate())}static checkIfAnyModalShown(){return g.map((e=>e.classList.contains("show"))).includes(!0)}static checkIfSpecificModalShown(e){const t=g.filter((t=>t.id===e));return!!t[0]&&t[0].classList.contains("show")}static async delay(e){return new Promise((t=>{setTimeout(t,e)}))}static removeLine(e){e.remove()}static disableElements(e){e.forEach((e=>{e.disabled=!0}))}static enableElements(e){e.forEach((e=>{e.disabled=!1}))}static blankElementValue(e){e.forEach((e=>{e.value=""}))}static setElementValueFromPlaceholder(e){e.forEach((e=>{e.value=e.placeholder}))}static setElementPlaceholderFromValue(e){e.forEach((e=>{e.placeholder=e.value}))}static generateTime(e){let t="";if(void 0===e||isNaN(e)||null===e)t="No Time Estimate";else{const n=Math.floor(e/86400);e-=3600*n*24;const o=Math.floor(e/3600);e-=3600*o;const r=Math.floor(e/60);e-=60*r,t=`${n}d, ${o}h, ${r}m, ${e=Math.floor(e)}s`,0==r&&t.includes("0m")&&(t=t.replace(" 0m,","")),0==o&&t.includes("0h")&&(t=t.replace(" 0h,","")),0==n&&t.includes("0d")&&(t=t.replace("0d,","")),0==r&&0==o&&0==n&&0==e&&(t=t.replace("0s","Done"))}return t}static milisecondsToDays(e){return isNaN(e)?0:Math.floor(e/86400)}static generateMilisecondsTime(e){let t=e/1e3,n="";if(!t||isNaN(t))n="No Interval";else{const o=Math.floor(t/86400);t-=3600*o*24;const r=Math.floor(t/3600);t-=3600*r;const i=Math.floor(t/60);t-=60*i,t=Math.floor(t),n=`${o}d, ${r}h, ${i}m, ${t}s`,0===i&&n.includes("0m")&&(n=n.replace(" 0m,","")),0===r&&n.includes("0h")&&(n=n.replace(" 0h,","")),0===o&&n.includes("0d")&&(n=n.replace("0d,","")),0===t&&(n=n.replace(", 0s","")),0===i&&0===r&&0===o&&0===t&&(n=n.replace("0s",e+" ms")),e||(n="No Interval")}return n}static isPrinterDisabled(e){return!e.target.innerHTML.includes("wheelchair")&&(!!e.target.innerHTML.includes("running")||void 0)}static removeClassIfExists(e,t){e.classList.contains(t)&&e.classList.remove(t)}static addClassIfDoesNotExist(e,t){e.classList.contains(t)||e.classList.add(t)}static removeDisplayNoneFromElement(e){e.classList.contains("d-none")&&e.classList.remove("d-none")}static addDisplayNoneToElement(e){e.classList.contains("d-none")||e.classList.add("d-none")}static removeFaSpinFromElement(e){e.classList.contains("fa-spin")&&e.classList.remove("fa-spin")}static addFaSpinToElement(e){e.classList.contains("fa-spin")||e.classList.add("fa-spin")}static addNotYetToElement(e){e.classList.contains("notyet")||e.classList.add("notyet")}static removeNotYetFromElement(e){e.classList.contains("notyet")&&e.classList.remove("notyet")}static togglePrinterDisableState(e){e.target.innerHTML.includes("running")?(e.target.innerHTML='<i class="fas fa-wheelchair"></i> Disable',e.target.title="Printer is Disabled, click to enable"):e.target.innerHTML.includes("wheelchair")&&(e.target.innerHTML='<i class="fas fa-running text-success"></i> Enable',e.target.title="Printer is Enabled, click to disable")}static getValueOrPlaceHolder(e){return e?""===e.value?e.placeholder:e.value:void 0}static returnProgressColour(e,t){return e<45?t?"bg-danger":"bg-success":e<75?"bg-warning":t?"bg-success":"bg-danger"}static convertValueToTemplate(e,t){const n=y.camelCaseToWords(e),o=`opBulk-${e}`;return"string"==typeof t?`\n        <div class="input-group mb-3 col-3">\n          <div class="input-group-prepend">\n            <span class="input-group-text" id="basic-addon1">${n}</span>\n          </div>\n          <input id="${o}" type="text" class="form-control" placeholder="${t}" aria-label="Username" aria-describedby="basic-addon1">\n        </div>\n      `:"number"==typeof t?`\n        <div class="input-group mb-3 col-3">\n          <div class="input-group-prepend">\n            <span class="input-group-text" id="basic-addon1">${n}</span>\n          </div>\n          <input id="${o}" type="number" class="form-control" placeholder="${t}" aria-label="Username" aria-describedby="basic-addon1">\n        </div>\n      `:"boolean"==typeof t?`\n        <div class="col-4">\n          <form class="was-validated">\n            <div class="custom-control custom-checkbox mb-3">\n                <input id="${o}" type="checkbox" class="custom-control-input" required ${t?"checked='true'":""}>\n                <label class="custom-control-label" for="${o}">${n}</label>\n                <div class="valid-feedback">${n} is on.</div>\n                 <div class="invalid-feedback">${n} is off.</div>\n            </div>\n          </form>\n        </div>\n      `:void 0}static camelCaseToWords(e){return e.match(/^[a-z]+|[A-Z][a-z]*/g).map((function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})).join(" ")}static captureScrollPosition(e){this.elementsScrollPosition.scrollTop=e.scrollTop,this.elementsScrollPosition.scrollLeft=e.scrollLeft}static reApplyScrollPosition(e){e.scrollTop=this.elementsScrollPosition.scrollTop,e.scrollLeft=this.elementsScrollPosition.scrollLeft}}var v,w,b;b={scrollTop:null,scrollLeft:null},(w="elementsScrollPosition")in(v=y)?Object.defineProperty(v,w,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[w]=b;var E=n(2868),S=n.n(E);class P extends Error{constructor(e,t){super(),Object.assign(e,t),this.name="OctoFarm Error",this.type=e.type,this.code=e.code,this.message=e.message,this.errors=e.errors,this.meta=e.meta,this.statusCode=e.statusCode,this.color=e.color,P.hasErrorNotificationBeenTriggered=!0}}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:false,enumerable:!0,configurable:!0,writable:!0}):e[t]=false}(P,"hasErrorNotificationBeenTriggered");const T="CLIENT",O="SERVER",R="NETWORK",C="UNKNOWN",A={BAD_REQUEST:{type:R,color:"danger",code:"BAD_REQUEST",message:"Bad request",statusCode:400},UNAUTHORIZED:{type:R,color:"danger",code:"UNAUTHORIZED",message:"Unauthorized",statusCode:401},FORBIDDEN:{type:R,color:"danger",code:"FORBIDDEN",message:"Forbidden",statusCode:403},RESOURCE_NOT_FOUND:{type:R,color:"danger",code:"RESOURCE_NOT_FOUND",message:"Resource not found",statusCode:404},NO_CONNECTION:{type:R,color:"danger",code:"NO_CONNECTION",message:"No connection to resource available",statusCode:0},INTERNAL_SERVER_ERROR:{type:O,color:"danger",code:"INTERNAL_SERVER_ERROR",message:"Something went wrong, Please try again later.",statusCode:500},BAD_GATEWAY:{type:O,color:"danger",code:"BAD_GATEWAY",message:"Bad gateway",statusCode:502},SERVICE_UNAVAILABLE:{type:O,color:"danger",code:"SERVICE_UNAVAILABLE",message:"Service unavailable",statusCode:503},GATEWAY_TIMEOUT:{type:O,color:"danger",code:"GATEWAY_TIMEOUT",message:"Gateway timeout",statusCode:504},UNKNOWN:{type:O,color:"danger",code:"UNKNOWN",message:"Unknown Error Response",statusCode:999}},x={FAILED_VALIDATION_PATH:{type:T,color:"danger",code:"FAILED_VALIDATION_PATH",message:"Input validation failed, no path was supplied",statusCode:412},FAILED_VALIDATION_KEY:{type:T,color:"danger",code:"FAILED_VALIDATION_KEY",message:"Input validation failed, no key was supplied",statusCode:412},FAILED_STATE_UPDATE:{type:T,color:"warning",code:"FAILED_STATE_UPDATE",message:"There was an issue updating the printer state",statusCode:412},UNKNOWN_ERROR:{type:C,color:"danger",code:"UNKNOWN_ERROR",message:"We encountered an unknown error! Please help the developer out and send a issue report!",statusCode:999},SILENT_ERROR:{type:C,color:"danger",code:"SILENT_ERROR",message:"",statusCode:999}};function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const N=e=>{const{name:t,errors:n}=e;let o=`<br>###${t}###<br>`;for(const e in n)o+=`<br>#${e.toLocaleUpperCase()}#<br> ${n[e].message} <br>`;return o};S().interceptors.request.use((function(e){return D.validatePath(e.url),e}),(function(e){return Promise.reject(e)})),S().interceptors.response.use((function(e){return e}),(function(e){var t,n;if(window.serverOffline)return{data:!1};switch(null==e||null===(t=e.response)||void 0===t?void 0:t.status){case 0:throw new P(A.NO_CONNECTION);case 400:throw new P(A.BAD_REQUEST,{message:`${A.BAD_REQUEST.message}: ${N(e.response.data)}`});case 401:throw new P(A.UNAUTHORIZED);case 403:throw new P(A.FORBIDDEN);case 404:throw new P(A.RESOURCE_NOT_FOUND);case 500:throw new P(A.INTERNAL_SERVER_ERROR,{message:`${A.INTERNAL_SERVER_ERROR.message}: ${e.response.statusText}`});case 502:throw new P(A.BAD_GATEWAY);case 503:throw new P(A.SERVICE_UNAVAILABLE,{message:`${A.SERVICE_UNAVAILABLE.message}: ${e.response.statusText}`});case 504:throw new P(A.GATEWAY_TIMEOUT);default:throw new P(A.UNKNOWN,{message:`${A.UNKNOWN.message}: ${null==e||null===(n=e.response)||void 0===n?void 0:n.statusText}`})}}));class D{static validatePath(e){if(!e){const e=new URL(path,window.location.origin);throw new P(x.FAILED_VALIDATION_PATH,{message:`${x.FAILED_VALIDATION_PATH} ${e}`})}}static async getPrinter(e){if(!e)throw new Error("Cant fetch printer without defined 'id' input");const t={i:e};return this.post(`${this.printerRoute}/printerInfo/`,t)}static async getPrinterName(){return this.get(this.generatePrinterNameRoute)}static async forceReconnect(e){const t={id:e};return this.post(this.forceReconnectRoute,t)}static async listPrinters(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=`${this.printerRoute}/printerInfo`;return e&&(n+="?disabled=true"),t&&(n+="?fullList=true"),this.post(n)}static async disablePrinter(e){const t={idList:e};return this.post(`${this.disablePrinterRoute}`,t)}static async enablePrinter(e){const t={idList:e};return this.post(`${this.enablePrinterRoute}`,t)}static async refreshPrinterSettings(e){const t={i:e};return this.post(`${this.printerRoute}/updatePrinterSettings`,t)}static async generateLogDump(){return this.post(`${this.logsRoute}/generateLogDump`,{})}static async deleteLogFile(e){return this.delete(`${this.logsRoute}/${e}`)}static async clearOldLogs(){return this.delete(`${this.logsRoute}/clear-old`)}static async getHistoryStatistics(){return this.get("history/statisticsData")}static async getClientSettings(){return this.get("settings/client/get")}static async getServerSettings(){return this.get(`${this.serverSettingsRoute}/get`)}static async getSelectedFilament(e){return this.get(`${this.selectedFilamentRoute}/${e}`)}static async setPrinterSteps(e,t){return this.post("printers/stepChange",{printer:e,newSteps:t})}static async getUser(e){return this.get(`${this.userRoute}/${e}`)}static async createNewUser(e){return this.post(`${this.userRoute}`,e)}static async editUser(e,t){return this.patch(`${this.userRoute}/${e}`,t)}static async deleteUser(e){return this.delete(`${this.userRoute}/${e}`)}static async resetUserPassword(e,t){return this.patch(`${this.userRoute}/${e}`,t)}static async getFilamentStatistics(){return this.get(this.filamentStatistics)}static async getFilamentSpools(){return this.get(this.filamentSpools)}static async getFilamentProfiles(){return this.get(this.filamentProfiles)}static async updateServerSettings(e){return this.post(this.updateSettingsRoute,e)}static async restartServer(){return this.post(`${this.serverSettingsRoute}/restart`,{})}static async getCustomGcode(e){let t="settings/customGcode";return e&&(t=`${t}/${e}`),this.get(t)}static async getOctoPrintUniqueFolders(){return this.get(`${this.printerRoute}/listUniqueFolders`)}static getCurrentOpState(){return this.get("client/currentOpSorting")}static getHealthChecks(){return this.get(this.healthCheckRoute)}static getFarmOverview(){return this.get(this.farmOverviewRoute)}static getConnectionOverview(){return this.get(this.connectionOverviewRoute)}static async sendError(e){try{await this.post(this.fireLogToServerRoute,e)}catch(e){console.error(e.toString())}}static updateCurrentOpState(e){let{iterie:t,order:n}=e;return this.post("client/currentOpSorting",{iterie:t,order:n})}static async updateActiveControlUser(e){try{await this.patch(`${this.updateActiveUserRoute}/${e}`)}catch(e){console.error("Unable to update active control user!",e.toString())}}static async updateUserActionsLog(e,t){try{await this.post(`${this.updateUserActionsLogRoute}/${e}`,t)}catch(e){console.error("Unable to update user actions log!",e.toString())}}static async get(e){const t=new URL(e,window.location.origin).href;return S().get(t).then((e=>e.data))}static async post(e,t){const n=new URL(e,window.location.origin).href;return S().post(n,t).then((e=>e.data))}static async delete(e){const t=new URL(e,window.location.origin).href;return S().delete(t).then((e=>e.data))}static async patch(e,t){const n=new URL(e,window.location.origin).href;return S().patch(n,t).then((e=>e.data))}}function I(e){const{printerState:{colour:{category:t}}}=e;return t}function k(e){return!(function(e){const{disabled:t}=e;return t}(e)||!function(e){const{fullyScanned:t}=e;return t}(e)||function(e){return"Info"===I(e)}(e)||function(e){return"Offline"===I(e)}(e))}function B(e){const{powerSettings:{powerOnCommand:t}={}}=e||{};return!!t||""!==t}L(D,"base","/api"),L(D,"printerRoute","/printers"),L(D,"disablePrinterRoute",D.printerRoute+"/disable"),L(D,"enablePrinterRoute",D.printerRoute+"/enable"),L(D,"generatePrinterNameRoute",D.printerRoute+"/generate_printer_name"),L(D,"updateUserActionsLogRoute",D.printerRoute+"/logUserPrintAction"),L(D,"updateActiveUserRoute",D.printerRoute+"/updateActiveUser"),L(D,"printerStepChangeRoute",D.printerRoute+"/stepChange"),L(D,"forceReconnectRoute",D.printerRoute+"/forceReconnect"),L(D,"serverSettingsRoute","/settings/server"),L(D,"clientSettingsRoute","/settings/client"),L(D,"filamentRoute","/filament"),L(D,"filamentStatistics",`${D.filamentRoute}/get/statistics`),L(D,"filamentProfiles",`${D.filamentRoute}/get/profile`),L(D,"filamentSpools",`${D.filamentRoute}/get/filament`),L(D,"logsRoute",`${D.serverSettingsRoute}/logs`),L(D,"updateSettingsRoute",`${D.serverSettingsRoute}/update`),L(D,"fireLogToServerRoute",`${D.clientSettingsRoute}/logs`),L(D,"userRoute","/users/users"),L(D,"healthCheckRoute",`${D.printerRoute}/healthChecks`),L(D,"farmOverviewRoute",`${D.printerRoute}/farmOverview`),L(D,"connectionOverviewRoute",`${D.printerRoute}/connectionOverview`),L(D,"selectedFilamentRoute",`${D.printerRoute}/selectedFilament`);const U="danger";async function M(e,t){let n="Your OctoPrint instance will "+t;if(["reboot","shutdown"].includes(t)&&(n="Your OctoPrint host will "+t),"Active"!==e.printerState.colour.category){let o=await H.systemNoConfirm(e,t);return await y.delay(1e3),void 0!==o?204===o.status?{status:"success",message:n}:{status:U,message:"OctoPrint responded with a status of: "+o.status+"... please check your power settings in the printer settings modal"}:{status:U,message:"Couldn't contact OctoPrint, is it online?"}}return{status:"skipped",message:"Skipped because printer wasn't in idle state..."}}class F{static async printerIsPoweredOn(e){let t=!1;const n=await H.getPowerStatus(e,e.powerSettings.powerStatusURL,e.powerSettings.powerStatusCommand);return n&&(t=n[Object.keys(n)[0]],"string"==typeof t&&("off"===t&&(t=!1),"on"===t&&(t=!0))),await D.post("/printers/overridepower/"+e._id,{printerPowerState:t}),t}static async revealPowerButtons(e){if(e.disabled)return;const t=function(e){const{otherSettings:{commands:{serverRestartCommand:t}={}}={}}=e||{};return!!t||""!==t}(e),n=function(e){const{otherSettings:{commands:{systemRestartCommand:t}={}}={}}=e||{};return!!t||""!==t}(e),o=function(e){const{otherSettings:{commands:{systemShutdownCommand:t}={}}={}}=e||{};return!!t||""!==t}(e),r=function(e){const{powerSettings:{powerOffCommand:t}={}}=e||{};return!!t||""!==t}(e),i=B(e),s=!!(a=e)||0===a.length;var a;const c=function(e){return!!k(e)&&"Active"===I(e)}(e),u=document.getElementById("printerRestartOctoPrint-"+e._id);t&&(u.disabled=!t,y.removeDisplayNoneFromElement(u));const l=document.getElementById("printerRestartHost-"+e._id);n&&(l.disabled=!n,y.removeDisplayNoneFromElement(l));const d=document.getElementById("printerShutdownHost-"+e._id);o&&(d.disabled=!o,y.removeDisplayNoneFromElement(d));const f=document.getElementById("printerPowerOff-"+e._id),p=document.getElementById("printerPowerOn-"+e._id),m=document.getElementById(`powerState-${e._id}`);s&&F.updatePrinterPowerState(e.printerPowerState,m),r&&(f.disabled=s?c||!e.printerPowerState:c||s,y.removeDisplayNoneFromElement(f)),i&&(p.disabled=s?c||e.printerPowerState:c||s,y.removeDisplayNoneFromElement(p)),(t||o||n||r||i)&&y.removeDisplayNoneFromElement(document.getElementById("octoPrintHeader-"+e._id))}static setupEventListeners(e){document.getElementById(`printerRestartOctoPrint-${e._id}`).addEventListener("click",(async t=>{t.target.disabled=!0;const{status:n,message:o}=await M(e,"restart");y.createAlert(n,o,3e3,"Clicked"),t.target.disabled=!1})),document.getElementById(`printerRestartHost-${e._id}`).addEventListener("click",(async t=>{t.target.disabled=!0;const{status:n,message:o}=await M(e,"reboot");y.createAlert(n,o,3e3,"Clicked"),t.target.disabled=!1})),document.getElementById(`printerShutdownHost-${e._id}`).addEventListener("click",(async t=>{t.target.disabled=!0;const{status:n,message:o}=await M(e,"shutdown");y.createAlert(n,o,3e3,"Clicked"),t.target.disabled=!1})),document.getElementById(`printerPowerOff-${e._id}`).addEventListener("click",(t=>{t.target.disabled=!0,bootbox.confirm("Are you sure you'd like to power down your printer?",(async function(n){n&&(await F.sendPowerCommandForPrinter(e,e.powerSettings.powerOffURL,e.powerSettings.powerOffCommand,"power off"),t.target.disabled=!1)}))})),document.getElementById(`printerPowerOn-${e._id}`).addEventListener("click",(async t=>{t.target.disabled=!0,await F.sendPowerCommandForPrinter(e,e.powerSettings.powerOnURL,e.powerSettings.powerOnCommand,"power on"),t.target.disabled=!1}))}static updatePrinterPowerState(e,t){void 0!==e&&t&&(y.removeDisplayNoneFromElement(t),e||t.classList.contains("text-danger")||(t.classList.add("text-danger"),t.classList.remove("text-success")),e&&(t.classList.contains("text-success")||(t.classList.add("text-success"),t.classList.remove("text-danger"))))}static async sendPowerCommandForPrinter(e,t,n,o){const r=await H.sendPowerCommand(e,t,n,o);await y.delay(1e3);const i=document.getElementById(`powerState-${e._id}`);return F.updatePrinterPowerState(await F.printerIsPoweredOn(e),i),r}}const j=async e=>{const t=await(async e=>{const t=y.createAlert("warning","Attempting connect sequence! please wait...",0,"clicked");if(e.quickConnectSettings.powerPrinter&&await(async e=>{if(B(e)&&!await F.printerIsPoweredOn(e)){const t={action:"Printer: power on",status:(await F.sendPowerCommandForPrinter(e,e.powerSettings.powerOnURL,e.powerSettings.powerOnCommand,"power on")).status};await D.updateUserActionsLog(e._id,t),await y.delay(e.quickConnectSettings.connectAfterPowerTimeout)}})(e),e.quickConnectSettings.connectPrinter){var n,o,r;const i={command:"connect",port:null!=e&&null!==(n=e.connectionOptions)&&void 0!==n&&n.portPreference?e.connectionOptions.portPreference:"AUTO",baudrate:null!=e&&null!==(o=e.connectionOptions)&&void 0!==o&&o.baudratePreference?parseInt(e.connectionOptions.baudratePreference):0,printerProfile:null!=e&&null!==(r=e.connectionOptions)&&void 0!==r&&r.printerProfilePreference?e.connectionOptions.printerProfilePreference:"_default"};let s=await H.post(e,"connection",i);const a={action:"Printer: connected",status:null==s?void 0:s.status};return await D.updateUserActionsLog(e._id,a),t.close(),null==s?void 0:s.status}return t.close(),204})(e);return await H.updateFeedAndFlow(e),await H.updateFilamentOffsets(e),await H.updateBedOffsets(e),await D.updateActiveControlUser(e._id),t};class H{static validatePrinter(e){if(!e._id)throw new Error("Printer URL not provided")}static get(e,t){this.validatePrinter(e);const n=`/octoprint/${e._id}/${t}`;return fetch(n,{method:"GET"}).catch((e=>(console.error(e),e)))}static postNOAPI(e,t,n){this.validatePrinter(e);const o=`/octoprint/${e._id}/${t}`;return fetch(o,{method:"POST",body:JSON.stringify(n)}).catch((e=>(console.error(e),e)))}static post(e,t,n){this.validatePrinter(e);const o=`/octoprint/${e._id}/api/${t}`;return fetch(o,{method:"POST",body:JSON.stringify(n)}).catch((e=>(console.error(e),e)))}static folder(e,t,n){this.validatePrinter(e);const o=`/octoprint/${e._id}/api/files/${t}`;return fetch(o,{method:"POST",body:n}).catch((e=>(console.error(e),e)))}static async delete(e,t){this.validatePrinter(e);const n=`/octoprint/${e._id}/api/${t}`;return fetch(n,{method:"DELETE"}).catch((e=>(console.error(e),e)))}static async getLogs(e,t){this.validatePrinter(e);const n=`/octoprint/${e._id}/${t}`;return fetch(n,{method:"GET",headers:{"Content-Type":"application/json","X-Api-Key":e.apikey,Range:"bytes=-500000"}})}static async selectTool(e,t){const n={command:"select",tool:t},o=await H.post(e,"printer/tool",n),r={action:"Printer: tool select",opts:n,status:o.status};return await D.updateUserActionsLog(e._id,r),204===o.status}static async system(e,t){const n="system/commands/core/"+t;bootbox.confirm({message:`Are your sure you want to ${t} ${e.printerName}?`,buttons:{cancel:{label:'<i class="fa fa-times"></i> No'},confirm:{label:'<i class="fa fa-check"></i> Yes'}},async callback(o){if(o){const o=await H.post(e,n).catch((e=>{y.createAlert("danger",e,4e3,"Clicked")})),r={action:`OctoPrint: ${t}`,status:o.status};await D.updateUserActionsLog(e._id,r),204===o.status?y.createAlert("success",`${e.printerName}: ${t} was successful`,3e3,"clicked"):y.createAlert("error",`${e.printerName}: ${t} was unsuccessful. Please make sure printer is connected and commands are setup in Settings -> Server.`,3e3,"clicked")}}})}static async systemNoConfirm(e,t){const n="system/commands/core/"+t,o=H.post(e,n),r={action:`OctoPrint: ${t}`,status:o.status};return await D.updateUserActionsLog(e._id,r),o}static async move(e,t,n,o,r){const i=function(){e.target.classList="btn btn-light"};let s,a=await document.querySelectorAll("#pcAxisSteps > .btn.active");a=a[0].innerHTML;let c={};"home"===n?c={command:n,axes:o}:"jog"===n?(a=Number(void 0!==r?r+a:a),c={command:n,[o]:a}):"feedrate"===n&&(c={command:n,factor:a}),s=await H.post(t,"printer/printhead",c);const u={action:`Printer: ${n}`,opts:c,status:s.status};await D.updateUserActionsLog(t._id,u),204===s.status?(e.target.classList="btn btn-success",setTimeout(i,500)):(e.target.classList="btn btn-danger",setTimeout(i,500))}static async checkFile(e,t){const n="api/files/local/"+t;return(await H.get(e,n)).status}static async file(e,t,n){const o="files/local/"+t;if("load"===n){const r={command:"select",print:!1},i=await H.post(e,encodeURIComponent(o),r),s={action:`File: ${n}`,opts:r,fullPath:t,status:i.status};return await D.updateUserActionsLog(e._id,s),i}if("print"===n){const r={command:"select",print:!0};await j(e);const i=await H.post(e,encodeURIComponent(o),r),s={action:`File: ${n}`,opts:r,fullPath:t,status:i.status};return await D.updateUserActionsLog(e._id,s),i}if("delete"===n){const r=await H.delete(e,encodeURIComponent(o)),i={action:`File: ${n}`,fullPath:t,status:r.status};return await D.updateUserActionsLog(e._id,i),r}}static async updateFeedAndFlow(e){const t={command:"flowrate",factor:parseInt(e.flowRate)};await H.post(e,"printer/tool",t);const n={command:"feedrate",factor:parseInt(e.feedRate)};await H.post(e,"printer/printhead",n)}static async updateBedOffsets(e){if(null!=e.selectedFilament&&Array.isArray(e.selectedFilament)){var t,n;const o=parseInt(null==e||null===(t=e.selectedFilament[0])||void 0===t||null===(n=t.spools)||void 0===n?void 0:n.bedOffset);if(o){const t={command:"offset",offset:o};await H.post(e,"printer/bed",t)}}}static async updateFilamentOffsets(e){if(null!=e.selectedFilament&&Array.isArray(e.selectedFilament)){const t={command:"offset",offsets:{}};e.selectedFilament.forEach(((e,n)=>{null!=e&&(t.offsets["tool"+n]=parseInt(e.spools.tempOffset))})),await H.post(e,"printer/tool",t)}}static async jobAction(e,t,n){let o=await D.get("settings/server/get"),r=!1;void 0!==o.filament&&(r=o.filament.filamentCheck);let i=!1;if(null!==e.selectedFilament&&Array.isArray(e.selectedFilament))for(const t of e.selectedFilament)null===t&&(i=!0);if(!r||!i||"start"!==t.command){await j(e);const n=await H.post(e,"job",t),o={action:`Print: ${t.command}`,opts:t,status:n.status};return await D.updateUserActionsLog(e._id,o),n}bootbox.confirm({message:"You have spools in the inventory, but none selected. Would you like to select a spool?",buttons:{confirm:{label:"Yes",className:"btn-success"},cancel:{label:"No",className:"btn-danger"}},async callback(n){if(!n){await j(e);const{status:n}=await H.post(e,"job",t),o={action:`Print: ${t.command}`,opts:t,status:n};await D.updateUserActionsLog(e._id,o),((e,t)=>{204===e||200===e||201===e?y.createAlert("success","Your undefined command was successful",3e3,"clicked"):409===e?y.createAlert("warning","There was a conflict, could not complete the undefined command.",3e3,"clicked"):y.createAlert("error","There was an error with your undefined command",3e3,"clicked")})(n)}}}),n&&(n.target.disabled=!1)}static async connect(e,t){let n;n="connect"===e?{command:"connect",port:document.getElementById("pmSerialPort").value,baudrate:parseInt(document.getElementById("pmBaudrate").value),printerProfile:document.getElementById("pmProfile").value,save:!0}:{command:"disconnect"};const o=await H.post(t,"connection",n),r={action:`Printer: ${n.command}`,opts:n,status:o.status};await D.updateUserActionsLog(t._id,r),void 0!==o&&204===o.status?(y.createAlert("success",`${t.printerName}: ${n.command}ion attempt was successful`,3e3,"click"),"connect"===e?(document.getElementById("pmSerialPort").disabled=!0,document.getElementById("pmBaudrate").disabled=!0,document.getElementById("pmProfile").disabled=!0):(document.getElementById("pmSerialPort").disabled=!1,document.getElementById("pmBaudrate").disabled=!1,document.getElementById("pmProfile").disabled=!1)):(document.getElementById("pmSerialPort").disabled=!1,document.getElementById("pmBaudrate").disabled=!1,document.getElementById("pmProfile").disabled=!1,y.createAlert("error",`${t.printerName}: could not ${n.command}.`,3e3,"click"))}static async sendPowerCommand(e,t,n,o){var r;const{printerName:i}=e;t.includes("[PrinterURL]")&&(t=t.replace("[PrinterURL]","")),t.includes("[PrinterAPI]")&&(t=t.replace("[PrinterAPI]",e.apikey)),t.includes(e.printerURL)&&(t=t.replace(e.printerURL,"")),t.includes("/api/")&&(t=t.replace("/api/",""));const s={action:`Printer: ${o}`,command:n};let a;if(void 0===n||0===n.length)try{a=await H.get(e,t),s.status=a.status,await D.updateUserActionsLog(e._id,s)}catch(t){y.createAlert("error",`${e.printerName}: Could not complete ${o} - Error: ${t}`,3e3);const n=x.SILENT_ERROR;throw n.message=`Bulk Commands - ${t}`,new P(n)}else try{a=await H.post(e,t,JSON.parse(n)),s.status=a.status,await D.updateUserActionsLog(e._id,s)}catch(t){y.createAlert("error",`${e.printerName}: Could not complete ${o} - Error: ${t}`,3e3);const n=x.SILENT_ERROR;throw n.message=`Bulk Commands - ${t}`,new P(n)}return null!==(r=a)&&void 0!==r&&r.ok?y.createAlert("success",`${i}: Successfully ${o}!`,3e3,"Clicked"):y.createAlert("error",`${i}: Failed to complete ${o}<br> Status: ${a.statusText}`,3e3,"Clicked"),"done"}static async getPowerStatus(e,t,n){if(t.includes("[PrinterURL]")&&(t=t.replace("[PrinterURL]","")),t.includes("[PrinterAPI]")&&(t=t.replace("[PrinterAPI]",e.apikey)),t.includes(e.printerURL)&&(t=t.replace(e.printerURL,"")),t.includes("/api/")&&(t=t.replace("/api/","")),n&&0===n.length)try{let n=await H.get(e,t),o=!1;return 200===(null==n?void 0:n.status)||204===(null==n?void 0:n.status)?o=await n.json():console.warn(`Power Status - ${null!=n&&n.status?n.status:"No Status"} \n Message - ${null!=n&&n.statusMessage?n.statusMessage:"No Message"}`),o}catch(e){const t=x.SILENT_ERROR;throw t.message=`Power Status - ${e}`,console.warn(`Power Status - ${e}`),new P(t)}else try{let o=await H.post(e,t,JSON.parse(n)),r=!1;return 200===(null==o?void 0:o.status)||204===(null==o?void 0:o.status)?r=await o.json():console.warn(`Power Status - ${null!=o&&o.status?o.status:"No Status"} \n Message - ${null!=o&&o.statusMessage?o.statusMessage:"No Message"}`),r}catch(e){const t=x.SILENT_ERROR;throw t.message=`Power Status - ${e}`,console.warn(`Power Status - ${e}`),new P(t)}}}const q="/mon/currentOp"===window.location.pathname;const W=async()=>{if(location.href.includes("submitEnvironment")){const e=window.location.protocol+"//"+window.location.host;window.location.replace(e)}else window.location.reload()};let V=!1,Y=!1,z=5;const Q={seconds:3,get getSeconds(){return this.seconds},set setSeconds(e){this.seconds=e}},G=e=>{z=e;const t=document.getElementById("lostServerConnectionTimer");V||(V=setInterval((()=>{z<=1?(t.innerHTML="Now!",clearInterval(V),V=!1):(z--,t.innerHTML=`${z} seconds...`)}),1e3))},J=async()=>{document.getElementById("forceRefreshPageButton").addEventListener("click",(()=>{W()})),Y||(Y=setTimeout((()=>{$("#lostServerConnection").modal("show"),Y=!1}),5e3))};let K;const X=function(e,t){let n,o;return function(){o=d(t)?t:function(){return t};const r=this,i=arguments,s=function(){n=null,e.apply(r,i)};clearTimeout(n),n=setTimeout(s,o())}}((function(){Z(),Q.setSeconds=2*Q.getSeconds,Q.getSeconds>=64&&(Q.setSeconds=64)}),(function(){return 1e3*Q.getSeconds}));function Z(){K=new EventSource("/events"),K.onmessage=async function(t){const{type:n,message:o,id:r}=await async function(t){try{return((t,n)=>{const o=e(t,u).map(c),r=o[0],i=n||a,d=typeof r===s&&r?l(o,new Set,r,i):r;return i.call({"":d},"",d)})(t)}catch(e){return!1}}(t.data);if(n===f.MESSAGE_TYPES.AM_I_ALIVE&&await(async e=>{window.serverOffline=!1;const t=document.getElementById("lostServerConnection");if(t&&t.className.includes("show")){let t="";t=null!=e&&e.loginRequired?"Server is alive, reloading screen...":"Server is alive!",document.getElementById("lostServerConnectionTimer").innerHTML=t,null!=e&&e.loginRequired?await W():await(async()=>{$("#lostServerConnection").modal("hide")})()}})(o),n===f.MESSAGE_TYPES.FILE_UPDATE&&await function(e,t){if(e&&t&&document.getElementById(`file-${e}`)){const{expectedPrintTime:n,failed:o,fileSize:r,printCost:i,success:s,thumbnail:a,toolCosts:c,toolUnits:u,uploadDate:l,electricityCosts:d,maintenanceCosts:f}=t.value;((e,t,n)=>{if(e&&t&&n){const o=document.getElementById(`fileHistoryRate-${e}`);y.doesElementNeedUpdating(`<i class="fas fa-thumbs-up"></i> ${t} / <i class="fas fa-thumbs-down"></i> ${n}`,o,"innerHTML")}})(e,s,o),((e,t)=>{if(e&&t){const n=document.getElementById(`fileTime-${e}`);y.doesElementNeedUpdating(`${p.generateTime(t)}`,n,"innerHTML")}})(e,n),((e,t)=>{if(e&&t){const n=document.getElementById(`fileCost-${e}`);y.doesElementNeedUpdating(`Print Cost: ${null==t?void 0:t.toFixed(2)}`,n,"innerHTML")}})(e,i),((e,t,n)=>{if(e&&t&&n){const o=document.getElementById(`fileTool-${e}`);let r="";t.forEach(((e,t)=>{r+=`<i class="fas fa-weight"></i> ${e} / <i class="fas fa-dollar-sign"></i> Cost: ${n[t]}<br>`})),y.doesElementNeedUpdating(r,o,"innerHTML")}})(e,u,c),((e,t)=>{if(e&&t){const n=document.getElementById(`fileDate-${e}`);let o=new Date(1e3*t);const r=o.toDateString(),i=o.toTimeString().substring(0,8);y.doesElementNeedUpdating(`${r} ${i}`,n,"innerHTML")}})(e,l),((e,t)=>{if(e&&t){const n=document.getElementById(`fileSize-${e}`);y.doesElementNeedUpdating(p.bytes(t),n,"innerHTML")}})(e,r),((e,t)=>{if(e&&t){const n=document.getElementById(`fileElectricityCost-${e}`);y.doesElementNeedUpdating(t.toFixed(2),n,"innerHTML")}})(e,d),((e,t)=>{if(e&&t){const n=document.getElementById(`fileMaintainenceCost-${e}`);y.doesElementNeedUpdating(t.toFixed(2),n,"innerHTML")}})(e,f);const{additionalInformation:m}=t;m&&((e,t,n)=>{if(e&&(console.log(n),t&&n)){const o=document.getElementById(`fileThumbnail-${e}`),r=`<span class="text-center"><img src='/octoprint/${n}/${t}' width="100%" alt="thumbnail"></span>`;y.doesElementNeedUpdating(r,o,"innerHTML")}})(e,a,m.printerID)}}(r,o),n===f.MESSAGE_TYPES.CURRENT_OPERATIONS){const{operations:e,count:t}=o;await function(e,t){if(document.getElementById("currentOperationsPanel")&&(e&&0!==e.length||document.querySelectorAll("[id^='coCard-']").forEach((e=>{e.remove()})),document.getElementById("completeCount").innerHTML=null!=t&&t.complete?"Complete: "+t.complete:"Complete: 0",document.getElementById("idleCount").innerHTML=null!=t&&t.idle?"Idle: "+t.idle:"Idle: 0",document.getElementById("activeCount").innerHTML=null!=t&&t.active?"Active: "+t.active:"Active: 0",document.getElementById("disconCount").innerHTML=null!=t&&t.disconnected?"Disconnected: "+t.disconnected:"Disconnected: 0",document.getElementById("offlineCount").innerHTML=null!=t&&t.offline?"Offline: "+t.offline:"Offline: 0",document.getElementById("farmProgress").innerHTML=null!=t&&t.farmProgress?t.farmProgress+"%":"0%",document.getElementById("farmProgress").style=`width: ${null!=t&&t.farmProgress?t.farmProgress:0}%`,document.getElementById("farmProgress").classList=`progress-bar progress-bar-striped bg-${null==t?void 0:t.farmProgressColour}`,e)){e.forEach(((e,t)=>{let n=new Date;n=n.getTime();const o=new Date(n+1e3*e.timeRemaining).toDateString();let r=new Date(n+1e3*e.timeRemaining).toTimeString();r=r.substring(0,5);const i=o+": "+r,s=`<button id='currentHarvest-${e.index}' type='button' title="Clear your finished print from current operations" class='tag btn btn-success btn-sm mt-0 pt-0 pb-0'>Print Harvested?</button>`,a=`<button id='restartCurrentPrint-${e.index}' type='button' title="Restart your current selected print" class='tag btn btn-warning btn-sm mt-0 pt-0 pb-0'>Restart Print</button>`;let c=null;if(void 0!==typeof e.fileName&&(c=e.fileName.replace(".gcode",""),c.length>40&&(c=c.substring(0,40)+"...")),document.getElementById(`coCard-${e.index}`)){100===e.progress?(document.getElementById("finishedPrint-"+e.index).classList.remove("d-none"),document.getElementById("futureDate-"+e.index).classList.add("d-none"),document.getElementById("currentRestart-"+e.index).classList.remove("d-none"),document.getElementById("currentTime-"+e.index).classList.add("d-none"),document.getElementById("currentProgressMain-"+e.index).classList.add("d-none")):(document.getElementById("finishedPrint-"+e.index).classList.add("d-none"),document.getElementById("futureDate-"+e.index).classList.remove("d-none"),document.getElementById("currentRestart-"+e.index).classList.add("d-none"),document.getElementById("currentTime-"+e.index).classList.remove("d-none"),document.getElementById("currentProgressMain-"+e.index).classList.remove("d-none"));const t=document.getElementById("currentProgress-"+e.index);document.getElementById("currentOpFile-"+e.index).innerHTML=c,document.getElementById("currentTime-"+e.index).innerHTML=p.generateTime(e.timeRemaining),document.getElementById("futureDate-"+e.index).innerHTML=i,t.style=`width: ${e.progress}%`,t.innerHTML=e.progress+"%",t.className=`progress-bar progress-bar-striped bg-${e.progressColour}`}else{let t="card card-block text-white bg-secondary d-inline-block  text-truncate",n="min-width: 200px; max-width: 200px;";q&&(t="col-sm-12 col-md-4 col-lg-3 col-xl-2 card card-block text-white bg-secondary d-inline-block  text-truncate",n=""),document.getElementById("currentOperationsBody").insertAdjacentHTML("beforeend",`\n                <div id="coCard-${e.index}"\n                class="${t}"\n                style="${n}"\n              >\n                  <div class="card-header pb-1 pt-1 pl-2 pr-2">\n                     ${e.name}</div>\n                  <div class="card-body  pb-0 pt-2 pl-2 pr-2">\n                  <h6 id="currentOpFile-${e.index}" class="pb-0 text-center" style="font-size:0.6rem;"> ${c} </h6>\n                  <h6 id="currentRestart-${e.index}" class="pb-0 text-center d-none" style="font-size:0.6rem;">${a}</h6>\n                  <h6 id="currentTime-${e.index}" class="pb-0 text-center" style="font-size:0.6rem;">${p.generateTime(e.timeRemaining)}</h6>\n        <h6 id="futureDate-${e.index}" class="pb-0 text-center" style="font-size:0.6rem;"> ${i} </h6>\n        <h6 id="finishedPrint-${e.index}" class="pb-0 text-center d-none" style="font-size:0.6rem;"> ${s} </h6>\n                    <div id="currentProgressMain-${e.index}" class="progress">\n                      <div id="currentProgress-${e.index}"\n                        class="progress-bar progress-bar-striped bg-${e.progressColour}"\n                        role="progressbar"\n                        style="width: ${e.progress}%"\n                        aria-valuenow="${e.progress}"\n                        aria-valuemin="0"\n                        aria-valuemax="100"\n                      >\n                      ${e.progress}%\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                `),document.getElementById("currentHarvest-"+e.index).addEventListener("click",(async()=>{await async function(e){const t=await D.getPrinter(e);await H.file(t,t.currentJob.filePath,"load")}(e.index)})),document.getElementById("restartCurrentPrint-"+e.index).addEventListener("click",(async()=>{await async function(e){const t=await D.getPrinter(e);await H.file(t,t.currentJob.filePath,"print")}(e.index)}))}document.getElementById("coCard-"+e.index).style.order=t}));const t=document.querySelectorAll("[id^='coCard-']"),n=[];e.forEach((e=>{n.push(e.index)}));const o=[];t.forEach((e=>{const t=e.id.split("-");o.push(t[1])})),_.difference(o,n).forEach((e=>{document.getElementById("coCard-"+e).remove()}))}}(e,t)}if(n===f.MESSAGE_TYPES.NEW_CAMERA_IMAGE){const{printerID:e,cameraURL:t}=o;await((e,t)=>{const n=document.getElementById(`camera-${e}`);n&&(n.src=t);const o=document.getElementById(`cameraModal-${e}`);o&&(o.src=t);const r=document.querySelectorAll('*[id^="printerCameraControl"]');if(r.length>0){const n=_.findIndex(r,(function(t){return t.id.split("-")[1]===e}));r[n]&&(r[n].src=t)}})(e,t)}},K.onopen=function(e){console.debug("Connected to servers event stream..."),Q.setSeconds=3},K.onerror=async function(e){window.serverOffline=!0,console.debug("Server connection lost! Re-connecting in... "+Q.getSeconds+"s"),G(Q.getSeconds),console.error(e),await J(),K.close(),X();const t=x.SILENT_ERROR;throw t.message=`Events Service - ${e.target.url}: ${e.target.readyState}`,new P(t)},K.onclose=async function(e){window.serverOffline=!0,console.debug("Server connection closed! Re-establishing..."+Q.getSeconds+"s"),G(Q.getSeconds),console.warn(e),await J(),K.close(),X()}}Z()})()})();
//# sourceMappingURL=events.service.1.6.9.min.js.map